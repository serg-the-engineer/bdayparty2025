<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –°–µ—Ä–≥–∞ ‚Äî 13 –¥–µ–∫–∞–±—Ä—è 2025</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Playfair+Display:wght@700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    :root {
      --color-bg: #faf9f7;
      --color-bg-alt: #f0eeea;
      --color-text: #2d2d2d;
      --color-text-muted: #6b6b6b;
      --color-accent: #5d7a64;
      --color-accent-hover: #4a6350;
      --color-accent-light: #e8f0e9;
      --color-warm: #c9a86c;
      --color-warm-light: #faf3e6;
      --color-danger: #b85c5c;
      --color-danger-light: #fae8e8;
      --color-border: #e0ddd8;
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
      --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.08);
      --radius: 12px;
      --radius-sm: 8px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    body {
      font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--color-bg);
      color: var(--color-text);
      line-height: 1.6;
      font-size: 16px;
      overflow-x: hidden;
      word-wrap: break-word;
    }

    /* Navigation - Mobile (top bar, icons only) */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: var(--color-accent);
      backdrop-filter: blur(12px);
      border-radius: 0;
      z-index: 100;
      padding: 0.5rem 1rem;
      box-shadow: 0 4px 15px rgba(93, 122, 100, 0.3);
      border-bottom: none;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 0.25rem;
      margin: 0;
      justify-content: center;
    }

    nav a {
      text-decoration: none;
      color: rgba(255, 255, 255, 0.8);
      font-size: 1.1rem;
      padding: 0.6rem 0.9rem;
      border-radius: 1.5rem;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    nav a:hover {
      background: rgba(255, 255, 255, 0.15);
      color: white;
    }

    nav a.active {
      background: rgba(255, 255, 255, 0.25);
      color: white;
    }

    nav .nav-label {
      display: none;
    }

    /* Offset for fixed nav on mobile */
    main {
      padding-top: 50px;
    }

    /* Sections */
    section {
      padding: 3rem 1.25rem;
      max-width: 800px;
      margin: 0 auto;
    }

    section:nth-child(even) {
      background: var(--color-bg-alt);
    }

    h1 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 2.5rem;
      line-height: 1.2;
      margin-bottom: 1rem;
    }

    h2 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: 1.75rem;
      margin-bottom: 1.5rem;
      color: var(--color-text);
    }

    h3 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
      color: var(--color-accent);
    }

    p {
      margin-bottom: 1rem;
      color: var(--color-text-muted);
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 2rem 1.25rem 3rem;
      position: relative;
      background: transparent;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100vw;
      height: 100%;
      background: linear-gradient(180deg, var(--color-warm-light) 0%, var(--color-bg) 100%);
      z-index: -1;
    }

    /* Polaroid style photos */
    .polaroid {
      background: white;
      padding: 1rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1);
      display: inline-block;
    }

    .polaroid img {
      display: block;
      width: 100%;
      height: auto;
    }

    .hero-photo-wrap {
      transform: rotate(4deg);
      margin-bottom: 1.5rem;
    }

    .hero-photo-wrap .polaroid {
      padding: 0.75rem;
    }

    .hero-photo-wrap img {
      width: 220px;
      height: 220px;
      object-fit: cover;
      object-position: center 20%;
    }

    .hero .date {
      display: inline-block;
      background: var(--color-accent);
      color: white;
      padding: 0.5rem 1.25rem;
      border-radius: 2rem;
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .hero h1 {
      font-size: 2rem;
    }

    .guest-greeting {
      font-size: 1.25rem;
      color: var(--color-accent);
      font-weight: 700;
      margin-top: 0.5rem;
    }

    /* Section with photo */
    .section-with-photo {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .photo-wrap {
      flex-shrink: 0;
      margin: 0 auto;
    }

    .photo-wrap .polaroid {
      max-width: 260px;
    }

    .photo-wrap img {
      max-width: 240px;
    }

    /* Random rotations for polaroids */
    .rotate-1 {
      transform: rotate(-4deg);
    }

    .rotate-2 {
      transform: rotate(3deg);
    }

    .rotate-3 {
      transform: rotate(-2deg);
    }

    img {
      max-width: 100%;
      height: auto;
    }

    .section-content {
      flex: 1;
    }

    /* Schedule */
    .schedule-list {
      list-style: none;
    }

    .schedule-item {
      display: flex;
      gap: 0.75rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--color-border);
    }

    .schedule-item:last-child {
      border-bottom: none;
    }

    .schedule-time {
      font-weight: 800;
      color: var(--color-accent);
      min-width: 50px;
      font-size: 0.9rem;
    }

    .schedule-desc {
      color: var(--color-text);
      font-size: 0.95rem;
    }


    /* RSVP Section */
    .rsvp-buttons {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .btn {
      padding: 0.875rem 1.5rem;
      border: none;
      border-radius: var(--radius);
      font-family: inherit;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      flex: 1;
      min-width: 140px;
    }

    .btn-yes {
      background: var(--color-bg);
      color: var(--color-text-muted);
      border: 2px solid var(--color-border);
    }

    .btn-yes:hover {
      border-color: var(--color-accent);
      color: var(--color-accent);
    }

    .btn-yes.active {
      background: var(--color-accent);
      border-color: var(--color-accent);
      color: white;
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .btn-no {
      background: var(--color-bg);
      color: var(--color-text-muted);
      border: 2px solid var(--color-border);
    }

    .btn-no:hover {
      border-color: var(--color-danger);
      color: var(--color-danger);
    }

    .btn-no.active {
      background: var(--color-danger-light);
      border-color: var(--color-danger);
      color: var(--color-danger);
    }

    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      cursor: pointer;
      font-weight: 600;
      color: var(--color-text);
    }

    .checkbox-label input {
      width: 20px;
      height: 20px;
      accent-color: var(--color-accent);
      cursor: pointer;
    }

    .guests-list {
      margin-top: 1.5rem;
    }

    .guests-summary {
      color: var(--color-text-muted);
      margin-bottom: 0.75rem;
    }

    .guests-summary strong {
      color: var(--color-accent);
      font-weight: 800;
    }

    /* RSVP section with meme backgrounds */
    #rsvp {
      position: relative;
      transition: background 0.3s ease;
    }

    #rsvp.rsvp-going {
      background: linear-gradient(rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0.75)),
        url('images/meme_going.jpg') center center / cover no-repeat;
    }

    #rsvp.rsvp-not-going {
      background: linear-gradient(rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0.75)),
        url('images/meme_not_going.jpg') center center / cover no-repeat;
    }

    .guests-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .guest-tag {
      background: white;
      padding: 0.4rem 0.75rem;
      border-radius: 2rem;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text);
      border: 1px solid var(--color-border);
    }

    .rsvp-saved {
      background: var(--color-warm-light);
      border: 1px solid var(--color-warm);
      padding: 0.75rem 1rem;
      border-radius: var(--radius-sm);
      margin-bottom: 1rem;
      font-weight: 600;
      color: var(--color-text);
      display: none;
    }

    .rsvp-saved.visible {
      display: block;
    }

    /* Topics Section */
    .topic-form {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .topic-input {
      flex: 1;
      min-width: 200px;
      padding: 0.75rem 1rem;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    .topic-input:focus {
      outline: none;
      border-color: var(--color-accent);
    }

    .topic-input::placeholder {
      color: var(--color-text-muted);
    }

    .btn-add {
      background: var(--color-warm);
      color: white;
      padding: 0.75rem 1.25rem;
      white-space: nowrap;
    }

    .btn-add:hover {
      background: #b8994f;
    }

    .topics-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .topic-card {
      background: white;
      padding: 1rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow-sm);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    .topic-text {
      flex: 1;
      font-weight: 600;
    }

    .topic-author {
      font-size: 0.8rem;
      color: var(--color-text-muted);
      font-weight: 400;
    }

    .topic-like {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--color-bg);
      border: 2px solid var(--color-border);
      padding: 0.5rem 0.75rem;
      border-radius: 2rem;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 700;
      transition: all 0.2s;
      position: relative;
    }

    .topic-like:hover {
      border-color: var(--color-danger);
    }

    .topic-like.liked {
      background: #ffe0e0;
      border-color: var(--color-danger);
      color: var(--color-danger);
    }

    .topic-like .heart {
      font-size: 1.1rem;
    }

    /* Wishlist */
    .wishlist {
      list-style: none;
    }

    .wishlist-item {
      background: white;
      padding: 1rem 1.25rem;
      border-radius: var(--radius);
      margin-bottom: 0.75rem;
      box-shadow: var(--shadow-sm);
      display: flex;
      gap: 0.75rem;
      align-items: flex-start;
    }

    .wishlist-num {
      background: var(--color-accent);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.85rem;
      flex-shrink: 0;
    }

    .wishlist-text {
      flex: 1;
    }

    .wishlist-text a {
      color: var(--color-accent);
      text-decoration: none;
    }

    .wishlist-text a:hover {
      text-decoration: underline;
    }

    /* Location Section */
    .location-info {
      margin-bottom: 1.5rem;
    }

    .location-address {
      background: var(--color-accent);
      color: white;
      padding: 1rem 1.25rem;
      border-radius: var(--radius);
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    .location-warning {
      background: var(--color-warm-light);
      border-left: 4px solid var(--color-warm);
      padding: 1rem;
      border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
      margin-bottom: 1.5rem;
    }

    .location-warning strong {
      color: var(--color-text);
    }

    .location-options h3 {
      margin-top: 1.5rem;
    }

    .location-options p {
      margin-bottom: 0.5rem;
    }

    .location-map {
      width: 100%;
      border-radius: var(--radius);
      box-shadow: var(--shadow-md);
      margin-top: 1.5rem;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 2rem 1rem;
      color: var(--color-text-muted);
      font-size: 0.9rem;
    }

    /* Loading state */
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }

    /* Button loading state */
    .btn.btn-loading {
      position: relative;
      pointer-events: none;
      opacity: 0.7;
    }

    .btn.btn-loading::after {
      content: '';
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    .topic-like.btn-loading {
      pointer-events: none;
      opacity: 0.6;
    }

    .topic-like.btn-loading::after {
      content: '';
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      width: 12px;
      height: 12px;
      border: 2px solid var(--color-accent);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spinLike 0.6s linear infinite;
    }

    @keyframes spin {
      to {
        transform: translateY(-50%) rotate(360deg);
      }
    }

    @keyframes spinLike {
      from {
        transform: translateY(-50%) rotate(0deg);
      }

      to {
        transform: translateY(-50%) rotate(360deg);
      }
    }

    /* Loading screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--color-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      flex-direction: column;
    }

    .loader-container {
      text-align: center;
      animation: fadeIn 0.5s ease-out;
    }

    .loader-spinner {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-bottom: 1.5rem;
    }

    .ball {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--color-accent);
      animation: bounce 1.4s ease-in-out infinite both;
    }

    .ball:nth-child(1) {
      animation-delay: -0.32s;
    }

    .ball:nth-child(2) {
      animation-delay: -0.16s;
    }

    .ball:nth-child(3) {
      animation-delay: 0s;
    }

    .loader-text {
      color: var(--color-accent);
      font-weight: 600;
      font-size: 1.1rem;
      margin: 0;
      transition: opacity 0.3s ease;
      animation: textFade 0.3s ease;
    }

    @keyframes textFade {
      0% {
        opacity: 0.7;
      }

      50% {
        opacity: 1;
      }

      100% {
        opacity: 1;
      }
    }

    /* Desktop styles */
    @media (min-width: 768px) {
      section {
        padding: 4rem 2rem;
      }

      /* Desktop nav - with labels */
      nav {
        padding: 0.75rem 2rem;
      }

      nav ul {
        max-width: 800px;
        margin: 0 auto;
        gap: 0.5rem;
      }

      nav a {
        font-size: 0.9rem;
        padding: 0.5rem 1rem;
        font-weight: 600;
      }

      nav .nav-label {
        display: inline;
      }

      nav a i {
        font-size: 0.85rem;
      }

      /* Offset for fixed nav on desktop */
      main {
        padding-top: 60px;
      }

      h1 {
        font-size: 3rem;
      }

      h2 {
        font-size: 2rem;
      }

      .hero {
        padding: 3rem 2rem 4rem;
      }

      .hero h1 {
        font-size: 2.5rem;
      }

      .hero-photo {
        width: 250px;
        height: 250px;
      }

      .section-with-photo {
        flex-direction: row;
        align-items: center;
        gap: 3rem;
      }

      .section-with-photo.reverse {
        flex-direction: row-reverse;
      }

      .photo-wrap {
        margin: 0;
      }

      .photo-wrap .polaroid {
        max-width: 300px;
      }

      .photo-wrap img {
        max-width: 280px;
      }

      .hero-photo-wrap img {
        width: 260px;
        height: 260px;
      }

      .rsvp-buttons {
        flex-wrap: nowrap;
      }

      .btn {
        flex: 0 1 auto;
        min-width: 160px;
      }

      .checkbox-group {
        flex-direction: row;
        gap: 2rem;
      }

      .topic-form {
        flex-wrap: nowrap;
      }
    }

    @media (min-width: 1024px) {
      section {
        max-width: 1000px;
      }

      .photo-wrap .polaroid {
        max-width: 340px;
      }

      .photo-wrap img {
        max-width: 320px;
      }
    }

    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes bounce {

      0%,
      80%,
      100% {
        transform: scale(0);
      }

      40% {
        transform: scale(1);
      }
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }

    /* Error message */
    .error-page {
      text-align: center;
      padding: 4rem 2rem;
    }

    .error-page h1 {
      color: var(--color-danger);
      margin-bottom: 1rem;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="#schedule" title="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ"><i class="fa-regular fa-calendar"></i><span
            class="nav-label">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span></a></li>
      <li><a href="#rsvp" title="–û—Ç–≤–µ—Ç–∏—Ç—å"><i class="fa-solid fa-hand"></i><span class="nav-label">–û—Ç–≤–µ—Ç–∏—Ç—å</span></a>
      </li>
      <li><a href="#topics" title="–¢–µ–º—ã"><i class="fa-regular fa-comments"></i><span class="nav-label">–¢–µ–º—ã</span></a>
      </li>
      <li><a href="#wishlist" title="–í–∏—à–ª–∏—Å—Ç"><i class="fa-solid fa-gift"></i><span class="nav-label">–í–∏—à–ª–∏—Å—Ç</span></a>
      </li>
      <li><a href="#location" title="–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è"><i class="fa-solid fa-location-dot"></i><span
            class="nav-label">–ê–¥—Ä–µ—Å</span></a></li>
    </ul>
  </nav>

  <!-- Loading screen -->
  <div id="loading-screen" class="loading-screen">
    <div class="loader-container">
      <div class="loader-spinner">
        <div class="ball"></div>
        <div class="ball"></div>
        <div class="ball"></div>
      </div>
      <p class="loader-text">–ü—Ä–æ–≤–µ—Ä—è—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ...</p>
    </div>
  </div>

  <!-- Main content (hidden until guest is verified) -->
  <main id="main-content" class="hidden">

    <!-- Hero Section -->
    <section id="hero" class="hero">
      <div class="hero-photo-wrap">
        <div class="polaroid">
          <img src="images/serg_wtf.jpg" alt="–°–µ—Ä–≥–µ–π">
        </div>
      </div>
      <span class="date">13 –¥–µ–∫–∞–±—Ä—è 2025</span>
      <p class="guest-greeting">–ü—Ä–∏–≤–µ—Ç, <span id="guest-name">–≥–æ—Å—Ç—å</span>!</p>
      <h1>–ú–Ω–µ 33!</h1>
      <p>–ò —è —Ö–æ—á—É —Å–æ–±—Ä–∞—Ç—å –¥—Ä—É–∑–µ–π –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å –¥–µ–±–∞—Ç–∞–º–∏, –µ–¥–æ–π –∏ —Ö–æ—Ä–æ—à–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º</p>
    </section>

    <!-- Format Section -->
    <section id="format">
      <div class="section-with-photo">
        <div class="photo-wrap rotate-1">
          <div class="polaroid">
            <img src="images/serg_serious.jpg" alt="–°–µ—Ä—å–µ–∑–Ω—ã–π –°–µ—Ä–≥–µ–π">
          </div>
        </div>
        <div class="section-content">
          <h2>–§–æ—Ä–º–∞—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h2>
          <p>–ú–Ω–µ —Ö–æ—á–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è —Å –¥—Ä—É–∑—å—è–º–∏, –ø–æ—Å–ø–æ—Ä–∏—Ç—å –∏ –ø–æ—Å–º–µ—è—Ç—å—Å—è. –ò —è —Ö–æ—á—É —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å –≤–∞–º–∏.</p>
          <p>–ù–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å, –æ–ø—ã—Ç –Ω–µ –Ω—É–∂–µ–Ω. –ë—É–¥—É—Ç –∫–æ–º–∞–Ω–¥—ã, –º–æ–¥–µ—Ä–∞—Ç–æ—Ä –∏ —Ç–∞–π–º–µ—Ä. –ì–ª–∞–≤–Ω–æ–µ ‚Äî —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –∂–µ–ª–∞–Ω–∏–µ
            –ø–æ—Å–ø–æ—Ä–∏—Ç—å!</p>
          <p>–ú–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏ ‚Äî –µ–¥–∞, –Ω–∞–ø–∏—Ç–∫–∏ –∏ —Å–≤–æ–±–æ–¥–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ. –ö–∞–ª—å—è–Ω—ã –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º ü§î</p>
        </div>
      </div>
    </section>

    <!-- Schedule Section -->
    <section id="schedule">
      <h2>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
      <ul class="schedule-list">
        <li class="schedule-item">
          <span class="schedule-time">16:45</span>
          <span class="schedule-desc">–°–±–æ—Ä –≥–æ—Å—Ç–µ–π</span>
        </li>
        <li class="schedule-item">
          <span class="schedule-time">17:00</span>
          <span class="schedule-desc">–õ–µ–≥–∫–æ–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ</span>
        </li>
        <li class="schedule-item">
          <span class="schedule-time">17:10</span>
          <span class="schedule-desc">–î–µ–±–∞—Ç—ã 1</span>
        </li>
        <li class="schedule-item">
          <span class="schedule-time">18:45</span>
          <span class="schedule-desc">–•–∞–≤–∫–∞, –∫–∞–ª—å—è–Ω—ã (?), –±–µ—Å–µ–¥—ã</span>
        </li>
        <li class="schedule-item">
          <span class="schedule-time">19:30</span>
          <span class="schedule-desc">–î–µ–±–∞—Ç—ã 2</span>
        </li>
        <li class="schedule-item">
          <span class="schedule-time">20:45</span>
          <span class="schedule-desc">–î–µ–±–∞—Ç—ã 3 (—Å—É—Ä—å–µ–∑–Ω—ã–µ)</span>
        </li>
        <li class="schedule-item">
          <span class="schedule-time">22:00</span>
          <span class="schedule-desc">–î–µ–±–∞—Ç—ã 4 / –ú—É–¥—Ä—ã–π –ë—Ä–æ / Askhole</span>
        </li>
        <li class="schedule-item">
          <span class="schedule-time">2:00</span>
          <span class="schedule-desc">–ù—É –≤—Å—ë, —Ö–æ—Ä–æ—à. –î–∞–≤–∞–π—Ç–µ —É–∂–µ –¥–æ —Å–≤–∏–¥–∞–Ω–∏—è</span>
        </li>
      </ul>
    </section>

    <!-- RSVP Section -->
    <section id="rsvp">
      <h2>–ü—Ä–∏–¥—ë—à—å?</h2>

      <div class="rsvp-buttons">
        <button class="btn btn-yes" id="btn-yes" onclick="setRsvp('yes')">
          üéâ –ü—Ä–∏–¥—É!
        </button>
        <button class="btn btn-no" id="btn-no" onclick="setRsvp('no')">
          üò¢ –ù–µ —Å–º–æ–≥—É
        </button>
      </div>

      <div class="checkbox-group" id="rsvp-options">
        <label class="checkbox-label">
          <input type="checkbox" id="plus-one" onchange="updateRsvpOptions()">
          –ë—É–¥—É —Å –∂–µ–Ω–æ–π/–¥–µ–≤—É—à–∫–æ–π/–¥—Ä—É–≥–æ–º
        </label>
        <label class="checkbox-label">
          <input type="checkbox" id="show-public" checked onchange="updateRsvpOptions()">
          –£–∫–∞–∑–∞—Ç—å –º–µ–Ω—è –≤ —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
        </label>
      </div>

      <div class="guests-list">
        <p class="guests-summary"><strong id="guests-count">0</strong> —á–µ–ª–æ–≤–µ–∫ —É–∂–µ —Å–æ–≥–ª–∞—Å–∏–ª–∏—Å—å, –≤ —Ç–æ–º —á–∏—Å–ª–µ:</p>
        <div class="guests-tags" id="guests-tags">
          <span class="guest-tag">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
      </div>
    </section>

    <!-- Topics Section -->
    <section id="topics">
      <h2>–¢–µ–º—ã –¥–ª—è –¥–µ–±–∞—Ç–æ–≤</h2>
      <p>–ü—Ä–µ–¥–ª–∞–≥–∞–π —Ç–µ–º—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è! –õ–∞–π–∫–∞–π –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è ‚Äî —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–∑—å–º—ë–º –≤ –∏–≥—Ä—É. (–Ω–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ)</p>

      <div class="topic-form">
        <input type="text" class="topic-input" id="topic-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–æ—à–∞–∫–∏ vs –°–æ–±–∞–∫–µ–Ω—ã"
          maxlength="100">
        <button class="btn btn-add" onclick="addTopic()">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>

      <div class="topics-list" id="topics-list">
        <div class="topic-card">
          <span class="topic-text">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º...</span>
        </div>
      </div>
    </section>

    <!-- Wishlist Section -->
    <section id="wishlist">
      <div class="section-with-photo reverse">
        <div class="photo-wrap rotate-2">
          <div class="polaroid">
            <img src="images/serg_wishes.JPG" alt="–°–µ—Ä–≥–µ–π">
          </div>
        </div>
        <div class="section-content">
          <h2>–í–∏—à–ª–∏—Å—Ç</h2>
          <p>–ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã. –ü—Ä–∞–≤–¥–∞. –ù–æ –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è ‚Äî –≤–æ—Ç –∏–¥–µ–∏, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –≥–æ–ª–æ–≤—É:</p>
          <ul class="wishlist">
            <li class="wishlist-item">
              <span class="wishlist-num">1</span>
              <span class="wishlist-text">–ü–ª–∞—Å—Ç–∏–∫ –¥–ª—è 3D-–ø–µ—á–∞—Ç–∏ PLA, PETG –≤ –ª—é–±–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ (<a
                  href="https://k3d.tech/part-navi/filament/" target="_blank">—Å—Ä–∞–≤–Ω–∏—Ç—å –º–æ–∂–Ω–æ —Ç—É—Ç</a>)</span>
            </li>
            <li class="wishlist-item">
              <span class="wishlist-num">2</span>
              <span class="wishlist-text">–ü–ª–µ–¥–∏–∫ –Ω–∞ –±–∞–ª–∫–æ–Ω–µ —Å–∏–¥–µ—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –ø—Ä–∏–∫–æ–ª—å–Ω—ã–π, –Ω–µ –¥–≤—É—Å–ø–∞–ª—å–Ω—ã–π</span>
            </li>
            <li class="wishlist-item">
              <span class="wishlist-num">3</span>
              <span class="wishlist-text">–≠–ª–∏–∫—Å–∏—Ä ‚Ññ–ª—é–±–æ–π –≤ –ª—é–±–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ</span>
            </li>
            <li class="wishlist-item">
              <span class="wishlist-num">4</span>
              <span class="wishlist-text">–°–æ–∫–∏ Premium Club (–æ—Å–æ–±–µ–Ω–Ω–æ –∞–Ω–∞–Ω–∞—Å –∏ –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç) –≤ –ª—é–±–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ (–µ—Å—Ç—å –≤
                –õ–µ–Ω—Ç–µ)</span>
            </li>
            <li class="wishlist-item">
              <span class="wishlist-num">5</span>
              <span class="wishlist-text">–ë–∞—Ä—å–µ—Ä —ç–∫—Å–ø–µ—Ä—Ç —Å–º–µ–Ω–Ω—ã–π –∫–∞—Ä—Ç—Ä–∏–¥–∂ 2 (—Å—Ä–∞–∑—É 3 –≤—ã–≥–æ–¥–Ω–µ–µ, –ø—Ä–∞–≤–¥–∞ —Ü–µ–Ω—é –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ
                –ø–æ–¥–∞—Ä–∫–∏)</span>
            </li>
            <li class="wishlist-item">
              <span class="wishlist-num">6</span>
              <span class="wishlist-text">–ù–µ–æ–±—ã—á–Ω—ã–π –≥–æ–ª–æ–≤–Ω–æ–π —É–±–æ—Ä</span>
            </li>
            <li class="wishlist-item">
              <span class="wishlist-num">7</span>
              <span class="wishlist-text">–ß—Ç–æ-–Ω–∏–±—É–¥—å –ø—Ä–∏–∫–æ–ª—å–Ω–æ–µ, —á—Ç–æ–±—ã –ø–æ–≤–µ—Å–∏—Ç—å –Ω–∞ —Å—Ç–µ–Ω—É, –Ω–æ –Ω–µ –∫–∞—Ä—Ç–∏–Ω—É</span>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Location Section -->
    <section id="location">
      <h2>–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è</h2>

      <div class="location-info">
        <div class="location-address">üìç –°–≤–∏—Ä–∏–¥–æ–≤–∞ 28, –∫–≤. 48</div>

        <div class="location-warning">
          <strong>–í–∞–∂–Ω–æ!</strong> –í—Ö–æ–¥ –∫ –¥–æ–º–∞–º —á–µ—Ä–µ–∑ –∫–∞–ª–∏—Ç–∫—É. –ß—Ç–æ–±—ã —è –µ—ë –æ—Ç–∫—Ä—ã–ª ‚Äî –∑–≤–æ–Ω–∏—Ç–µ <a href="tel:+79955077123">+7
            995 507-71-23</a> –∏–ª–∏ –ø–∏—à–∏—Ç–µ –≤ —Ç–µ–ª–µ–≥—É. –ù–∞–∑—ã–≤–∞–π—Ç–µ –Ω–æ–º–µ—Ä –∫–∞–ª–∏—Ç–∫–∏.
        </div>

        <div class="location-options">
          <h3>üöó –ù–∞ –∞–≤—Ç–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</h3>
          <p>–ï–¥–µ–º –¥–æ –ê—à–∞–Ω–∞, –ø–∞—Ä–∫—É–µ–º—Å—è –Ω–∞ —É–≥–ª—É –ø–ª–æ—â–∞–¥–∏ –Ω–µ–¥–∞–ª–µ–∫–æ –æ—Ç –¥–æ–º–∞ (–æ–±–æ–∑–Ω–∞—á–µ–Ω–æ —Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–º –Ω–∞ –∫–∞—Ä—Ç–µ). –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
            –ø–∞—Ä–∫–æ–≤–∫–∏ 100%. –ò–¥—ë–º –∫ –∑–∞–±–æ—Ä—á–∏–∫—É, –≤–∏–¥–∏–º –∫–∞–ª–∏—Ç–∫—É 3, –∑–≤–æ–Ω–∏–º –º–Ω–µ. –î–∞–ª—å—à–µ –≤–¥–æ–ª—å –¥–æ–º–∞ –∫ 1 –ø–æ–¥—ä–µ–∑–¥—É, –∫–≤. 48.</p>

          <h3>üöó –ù–∞ –∞–≤—Ç–æ (–¥–ª—è —Å—á–∞—Å—Ç–ª–∏–≤—á–∏–∫–æ–≤)</h3>
          <p>–ü–∏—à–∏—Ç–µ –º–Ω–µ –≤ –ª–∏—á–∫—É –Ω–æ–º–µ—Ä –∞–≤—Ç–æ, —è –¥–æ–±–∞–≤–ª—é –∫–∞–∫ –≥–æ—Å—Ç—è. –í—ä–µ–∑–∂–∞–µ–º —á–µ—Ä–µ–∑ –ª—é–±–æ–π —à–ª–∞–≥–±–∞—É–º (–æ—Ç–º–µ—á–µ–Ω—ã –∫—Ä–∞—Å–Ω—ã–º),
            –∫–∞–º–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞ —Å—á–∏—Ç–∞—Ç—å –Ω–æ–º–µ—Ä –∏ –ø—É—Å—Ç–∏—Ç—å. –ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—Ç ‚Äî –∑–≤–æ–Ω–∏—Ç–µ, –æ—Ç–∫—Ä–æ—é —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
            –ø–∞—Ä–∫–æ–≤–∫–∏: –¥–æ 18:00 —Å—Ä–µ–¥–Ω—è—è, –¥–æ 19:00 –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ, –ø–æ—Å–ª–µ ‚Äî –Ω–∞ —É–¥–∞—á—É. –¢–µ—Å–Ω–æ –∏ —Ç—É–ø–∏–∫–∏, –ø—Ä–∏–¥—ë—Ç—Å—è
            –º–∞–Ω–µ–≤—Ä–∏—Ä–æ–≤–∞—Ç—å.</p>

          <h3>üöï –ù–∞ —Ç–∞–∫—Å–∏</h3>
          <p>–û–±—ã—á–Ω–æ –¥–æ–≤–æ–∑—è—Ç –¥–æ –°–≤–∏—Ä–∏–¥–æ–≤–∞ 26, –ø–æ—Ç–æ–º –ø–µ—à–∫–æ–º —á–µ—Ä–µ–∑ –∫–∞–ª–∏—Ç–∫—É 1 (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –ª—é–±—É—é).</p>

          <h3>üöå –ù–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ</h3>
          <p>–î–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ ¬´30 –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω¬ª, —Ç–∞–º —É –º–Ω–æ–≥–∏—Ö –∞–≤—Ç–æ–±—É—Å–æ–≤ –∫–æ–Ω–µ—á–Ω–∞—è. –î–∞–ª—å—à–µ –∏–¥—ë–º –∫ –¥–æ–º—É —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω –¥–æ
            –∫–∞–ª–∏—Ç–∫–∏ 2. –ú–æ–∂–Ω–æ –¥–æ–µ—Ö–∞—Ç—å –¥–æ –ê—à–∞–Ω–∞ –∏ –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –∫–∞–ª–∏—Ç–∫—É 3.</p>
        </div>
      </div>

      <img src="images/goto.jpg" alt="–ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∑–¥–∞" class="location-map">
    </section>

  </main>

  <!-- Error page for unknown guests -->
  <div id="error-page" class="error-page hidden">
    <h1>üîí –£–ø—Å!</h1>
    <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ.</p>
    <p>–ï—Å–ª–∏ —Ç—ã –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ ‚Äî –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é.</p>
  </div>

  <footer>
    –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –¥—Ä—É–∑–µ–π
  </footer>

  <script>
    // ========================================
    // CONFIGURATION
    // ========================================

    // Google Apps Script Web App URL (replace with your deployed URL)
    const API_URL = 'https://script.google.com/macros/s/AKfycbypKE6Gor-gF5Iuj1ufdwWs65-_yZCNjy7qFGM41pn-6Ph9sYKbfwPPe3dM3Qcj1SwD/exec';

    // ========================================
    // STATE
    // ========================================

    let currentGuest = null;
    let currentGuestId = null;
    let rsvpStatus = null;
    let topics = [];
    let guestLikes = new Set();

    // ========================================
    // LOADER
    // ========================================

    const loaderTexts = [
      '–ü—Ä–æ–≤–µ—Ä—è—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ...',
      '–ü–æ–ª—É—á–∞—é —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ...',
      '–§–æ—Ä–º–∏—Ä—É—é —Ç–µ–º—ã –¥–ª—è –¥–µ–±–∞—Ç–æ–≤...',
      '–®–µ–≤–µ–ª—é –º–æ–∑–≥–∞–º–∏...',
      '–¢—É–ø–æ–π –≥—É–≥–ª –¥–æ–ª–≥–æ –æ—Ç–≤–µ—á–∞–µ—Ç...'
    ];

    let loaderTextIndex = 0;
    let loaderTextInterval = null;

    // ========================================
    // INITIALIZATION
    // ========================================

    document.addEventListener('DOMContentLoaded', () => {
      showLoader();
      init();
    });

    async function init() {
      // Get guest ID from URL query parameter
      const urlParams = new URLSearchParams(window.location.search);
      const guestId = urlParams.get('guest');

      if (!guestId) {
        showError();
        return;
      }

      currentGuestId = guestId;

      // First load guest data to validate user
      try {
        const response = await fetch(`${API_URL}?action=validate&guest=${currentGuestId}`, {
          redirect: 'follow'
        });
        const data = await response.json();

        if (!data.success || !data.guest) {
          showError();
          return;
        }

        // Guest is valid, set data
        currentGuest = data.guest.name;

        // Show main content
        document.getElementById('main-content').classList.remove('hidden');
        document.getElementById('error-page').classList.add('hidden');

        // Set guest name (only first name, before space)
        const firstName = currentGuest.split(' ')[0];
        document.getElementById('guest-name').textContent = firstName;

        // Load full data for the guest
        loadData();
      } catch (error) {
        console.error('Failed to validate guest:', error);
        showError();
      }
    }

    async function loadData() {
      try {
        const response = await fetch(`${API_URL}?action=init&guest=${currentGuestId}`, {
          redirect: 'follow'
        });
        const data = await response.json();

        if (data.success) {
          // Restore RSVP status
          if (data.rsvp) {
            rsvpStatus = data.rsvp.status;
            document.getElementById('plus-one').checked = data.rsvp.plusOne || false;
            document.getElementById('show-public').checked = data.rsvp.showPublic !== false;
            updateRsvpUI();
            showMyStatus();
          }

          // Update guests count and list (guests data is now loaded in init)
          updateGuestsList(data.guests || []);

          // Load topics
          topics = data.topics || [];
          guestLikes = new Set(data.myLikes || []);
          renderTopics();

          // Hide loader after successful data load
          hideLoader();
        }
      } catch (error) {
        console.error('Failed to load data:', error);
        // Show demo data if API is not configured
        if (API_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
          showDemoMode();
          hideLoader();
        } else {
          hideLoader();
        }
      }
    }

    function showDemoMode() {
      console.log('Running in demo mode - configure API_URL for full functionality');
      document.getElementById('guests-count').textContent = '3';
      document.getElementById('guests-tags').innerHTML = `
        <span class="guest-tag">–î–µ–º–æ-—Ä–µ–∂–∏–º</span>
        <span class="guest-tag">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API</span>
      `;
      topics = [
        { id: '1', text: '–ö–æ—Ç—ã vs –°–æ–±–∞–∫–∏', author: '–ü—Ä–∏–º–µ—Ä', likes: 5 },
        { id: '2', text: '–ü–∏—Ü—Ü–∞ —Å –∞–Ω–∞–Ω–∞—Å–∞–º–∏ ‚Äî –¥–∞ –∏–ª–∏ –Ω–µ—Ç?', author: '–ü—Ä–∏–º–µ—Ä', likes: 3 },
      ];
      renderTopics();
    }

    function startLoaderTextRotation() {
      // Reset to first text
      loaderTextIndex = 0;
      updateLoaderText();

      // Start rotating every second
      loaderTextInterval = setInterval(() => {
        loaderTextIndex = (loaderTextIndex + 1) % loaderTexts.length;
        updateLoaderText();
      }, 2000);
    }

    function stopLoaderTextRotation() {
      if (loaderTextInterval) {
        clearInterval(loaderTextInterval);
        loaderTextInterval = null;
      }
    }

    function updateLoaderText() {
      const loaderTextElement = document.querySelector('.loader-text');
      if (loaderTextElement) {
        loaderTextElement.textContent = loaderTexts[loaderTextIndex];
      }
    }

    function showLoader() {
      document.getElementById('loading-screen').classList.remove('hidden');
      startLoaderTextRotation();
    }

    function hideLoader() {
      document.getElementById('loading-screen').classList.add('hidden');
      stopLoaderTextRotation();
    }

    function showError() {
      hideLoader(); // This will also stop text rotation
      document.getElementById('main-content').classList.add('hidden');
      document.getElementById('error-page').classList.remove('hidden');
    }

    // ========================================
    // RSVP FUNCTIONS
    // ========================================

    async function setRsvp(status) {
      const btnYes = document.getElementById('btn-yes');
      const btnNo = document.getElementById('btn-no');

      // Add loading state to the clicked button
      const clickedBtn = status === 'yes' ? btnYes : btnNo;
      clickedBtn.classList.add('btn-loading');

      rsvpStatus = status;
      updateRsvpUI();

      const plusOne = document.getElementById('plus-one').checked;
      const showPublic = document.getElementById('show-public').checked;

      try {
        const params = new URLSearchParams({
          action: 'rsvp',
          guest: currentGuestId,
          name: currentGuest,
          status: status,
          plusOne: plusOne.toString(),
          showPublic: showPublic.toString()
        });

        const response = await fetch(`${API_URL}?${params.toString()}`, {
          redirect: 'follow'
        });

        const data = await response.json();
        if (data.success) {
          showMyStatus();
          updateGuestsList(data.guests || []);
        }
      } catch (error) {
        console.error('Failed to save RSVP:', error);
        // Demo mode - still show status
        if (API_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
          showMyStatus();
        }
      } finally {
        // Remove loading state
        btnYes.classList.remove('btn-loading');
        btnNo.classList.remove('btn-loading');
      }
    }

    async function updateRsvpOptions() {
      if (!rsvpStatus) return;

      const btnYes = document.getElementById('btn-yes');
      const btnNo = document.getElementById('btn-no');
      const activeBtn = rsvpStatus === 'yes' ? btnYes : btnNo;

      // Add loading state
      activeBtn.classList.add('btn-loading');

      const plusOne = document.getElementById('plus-one').checked;
      const showPublic = document.getElementById('show-public').checked;

      try {
        const params = new URLSearchParams({
          action: 'rsvp',
          guest: currentGuestId,
          name: currentGuest,
          status: rsvpStatus,
          plusOne: plusOne.toString(),
          showPublic: showPublic.toString()
        });

        const response = await fetch(`${API_URL}?${params.toString()}`, {
          redirect: 'follow'
        });

        const data = await response.json();
        if (data.success) {
          showMyStatus();
          updateGuestsList(data.guests || []);
        }
      } catch (error) {
        console.error('Failed to update RSVP options:', error);
        // Demo mode - still update status
        if (API_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
          showMyStatus();
        }
      } finally {
        // Remove loading state
        activeBtn.classList.remove('btn-loading');
      }
    }

    function updateRsvpUI() {
      const btnYes = document.getElementById('btn-yes');
      const btnNo = document.getElementById('btn-no');

      btnYes.classList.toggle('active', rsvpStatus === 'yes');
      btnNo.classList.toggle('active', rsvpStatus === 'no');
    }

    function showMyStatus() {
      const rsvpSection = document.getElementById('rsvp');
      rsvpSection.classList.remove('rsvp-going', 'rsvp-not-going');

      if (rsvpStatus === 'yes') {
        rsvpSection.classList.add('rsvp-going');
      } else if (rsvpStatus === 'no') {
        rsvpSection.classList.add('rsvp-not-going');
      }
    }

    function updateGuestsList(guests) {
      const confirmedGuests = guests.filter(g => g.status === 'yes');
      const publicGuests = confirmedGuests.filter(g => g.showPublic);

      // Count including +1s
      let totalCount = confirmedGuests.length;
      confirmedGuests.forEach(g => {
        if (g.plusOne) totalCount++;
      });

      document.getElementById('guests-count').textContent = totalCount;

      const tagsContainer = document.getElementById('guests-tags');
      if (publicGuests.length === 0) {
        tagsContainer.innerHTML = '<span class="guest-tag">–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ</span>';
      } else {
        tagsContainer.innerHTML = publicGuests
          .map(g => `<span class="guest-tag">${escapeHtml(g.name)}${g.plusOne ? ' +1' : ''}</span>`)
          .join('');
      }
    }

    // ========================================
    // TOPICS FUNCTIONS
    // ========================================

    async function addTopic() {
      const input = document.getElementById('topic-input');
      const addBtn = event.target;
      const text = input.value.trim();

      if (!text) return;

      // Add loading state
      input.disabled = true;
      addBtn.classList.add('btn-loading');

      try {
        const params = new URLSearchParams({
          action: 'topic',
          guest: currentGuestId,
          authorName: currentGuest,
          text: text
        });

        const response = await fetch(`${API_URL}?${params.toString()}`, {
          redirect: 'follow'
        });

        const data = await response.json();
        if (data.success) {
          topics = data.topics || [];
          renderTopics();
          input.value = '';
        }
      } catch (error) {
        console.error('Failed to add topic:', error);
        // Demo mode fallback
        if (API_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
          topics.push({
            id: Date.now().toString(),
            text: text,
            author: currentGuest,
            likes: 0
          });
          renderTopics();
          input.value = '';
        }
      } finally {
        // Remove loading state
        input.disabled = false;
        addBtn.classList.remove('btn-loading');
        input.focus();
      }
    }

    async function toggleLike(topicId) {
      const isLiked = guestLikes.has(topicId);
      const likeBtn = event.target.closest('.topic-like');

      // Add loading state
      if (likeBtn) {
        likeBtn.classList.add('btn-loading');
      }

      try {
        const params = new URLSearchParams({
          action: 'like',
          guest: currentGuestId,
          topicId: topicId,
          unlike: isLiked.toString()
        });

        const response = await fetch(`${API_URL}?${params.toString()}`, {
          redirect: 'follow'
        });

        const data = await response.json();
        if (data.success) {
          if (isLiked) {
            guestLikes.delete(topicId);
          } else {
            guestLikes.add(topicId);
          }
          topics = data.topics || [];
          renderTopics();
        }
      } catch (error) {
        console.error('Failed to toggle like:', error);
        // Demo mode fallback
        if (API_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
          if (isLiked) {
            guestLikes.delete(topicId);
            const topic = topics.find(t => t.id === topicId);
            if (topic) topic.likes--;
          } else {
            guestLikes.add(topicId);
            const topic = topics.find(t => t.id === topicId);
            if (topic) topic.likes++;
          }
          renderTopics();
        }
      } finally {
        // Remove loading state
        if (likeBtn) {
          likeBtn.classList.remove('btn-loading');
        }
      }
    }

    function renderTopics() {
      const container = document.getElementById('topics-list');

      if (topics.length === 0) {
        container.innerHTML = `
          <div class="topic-card">
            <span class="topic-text" style="color: var(--color-text-muted)">–ü–æ–∫–∞ –Ω–µ—Ç —Ç–µ–º. –ë—É–¥—å –ø–µ—Ä–≤—ã–º!</span>
          </div>
        `;
        return;
      }

      // Sort by likes descending
      const sortedTopics = [...topics].sort((a, b) => b.likes - a.likes);

      container.innerHTML = sortedTopics.map(topic => {
        const isLiked = guestLikes.has(topic.id);
        return `
          <div class="topic-card fade-in">
            <div class="topic-text">
              ${escapeHtml(topic.text)}
              <div class="topic-author">–æ—Ç ${escapeHtml(topic.author)}</div>
            </div>
            <button class="topic-like ${isLiked ? 'liked' : ''}" onclick="toggleLike('${topic.id}')">
              <span class="heart">${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
              <span>${topic.likes}</span>
            </button>
          </div>
        `;
      }).join('');
    }

    // ========================================
    // UTILITIES
    // ========================================

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Handle Enter key in topic input
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Enter' && e.target.id === 'topic-input') {
        addTopic();
      }
    });

    // ========================================
    // ACTIVE SECTION HIGHLIGHTING
    // ========================================

    function initActiveNavHighlight() {
      const sections = document.querySelectorAll('section[id]');
      const navLinks = document.querySelectorAll('nav a');

      const observerOptions = {
        root: null,
        rootMargin: '-20% 0px -60% 0px',
        threshold: 0
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const id = entry.target.getAttribute('id');
            navLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href') === '#' + id) {
                link.classList.add('active');
              }
            });
          }
        });
      }, observerOptions);

      sections.forEach(section => observer.observe(section));
    }

    // Initialize after DOM is ready
    document.addEventListener('DOMContentLoaded', initActiveNavHighlight);
  </script>
</body>

</html>